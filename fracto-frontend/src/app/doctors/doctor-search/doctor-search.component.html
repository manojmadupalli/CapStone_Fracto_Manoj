<h2>Search Doctors</h2>

<mat-card>
  <form (ngSubmit)="search()">

    <!-- City Dropdown -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>City</mat-label>
      <mat-select [(ngModel)]="selectedCity" name="city">
        <mat-option [value]="">All Cities</mat-option>
        <mat-option *ngFor="let city of cities" [value]="city">
          {{ city }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Specialization Dropdown -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Specialization</mat-label>
      <mat-select [(ngModel)]="selectedSpecializationId" name="specializationId">
        <mat-option [value]="null">All Specializations</mat-option>
        <mat-option *ngFor="let s of specializations" [value]="s.specializationId">
          {{ s.specializationName }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-raised-button color="primary" type="submit">Search</button>
  </form>
</mat-card>

<hr />

<table mat-table [dataSource]="doctors" class="mat-elevation-z8 full-width">

  <!-- Doctor -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> Doctor </th>
    <td mat-cell *matCellDef="let d">{{ d.name }}</td>
  </ng-container>

  <!-- City -->
  <ng-container matColumnDef="city">
    <th mat-header-cell *matHeaderCellDef> City </th>
    <td mat-cell *matCellDef="let d">{{ d.city }}</td>
  </ng-container>

  <!-- Specialization -->
  <ng-container matColumnDef="specialization">
    <th mat-header-cell *matHeaderCellDef> Specialization </th>
    <td mat-cell *matCellDef="let d">{{ d.specializationName }}</td>
  </ng-container>

  <!-- Rating -->
  <ng-container matColumnDef="rating">
    <th mat-header-cell *matHeaderCellDef> Rating </th>
    <td mat-cell *matCellDef="let d">{{ d.rating }}</td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
<p *ngIf="doctors.length === 0">No doctors found.</p>